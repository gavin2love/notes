---
title: 什么是Prometheus
date: 2022-03-21 09:00:00
permalink: /pages/7b850c/
---

<p align="center"><img src="/img/prometheus.jpg" width="auto" style="cursor: zoom-in;"></p>

## 什么是Prometheus? 
Prometheus是一个开源系统监控和警报工具包，最初由SoundCloud构建。自2012年成立以来，许多公司和组织都采用了普罗米修斯，该项目拥有一个非常活跃的开发者和用户社区。
它现在是一个独立的开源项目，独立于任何公司进行维护。为了强调这一点，并澄清项目的治理结构，普罗米修斯加入云计算基金会(CNCF)2016作为第二托管项目，继Kubernetes。
普罗米修斯收集并存储其指标作为时间序列数据，即指标信息与记录时的时间戳一起存储，以及称为标签的可选键值对。

<!-- more -->


> 有关普罗米修斯的更多详细概述，请参阅媒体[链接](https://prometheus.io/docs/introduction/media/)的参考资料


## 特征

普罗米修斯的主要特点是：

- 具有由度量名称和键/值对标识的时间序列数据的多维数据模型
- PromQL，一种 利用这种维度的灵活查询语言
- 不依赖分布式存储；单个服务器节点是自治的
- 时间序列收集通过 HTTP 上的Pull模型进行
- 通过中间网关支持推送时间序列
- 通过服务发现或静态配置发现目标
- 多种图形模式和仪表板支持

## 组成
Prometheus 生态系统由多个组件组成，其中许多是可选的：

- 主要的Prometheus 服务器，用于抓取和存储时间序列数据
- 用于检测应用程序代码的客户端库
- 支持短期工作的推送网关
- HAProxy、StatsD、Graphite 等服务的专用 exporters
- 处理警报的alertmanager
- 各种支持工具
> 大多数 Prometheus 组件都是用Go编写的，这使得它们易于构建和部署为静态二进制文件。


## 结构
![architecture](/img/architecture.png)

> Prometheus 从Job或通过Gateway中抓取指标。它在本地存储所有抓取的数据，并对这些数据运行记记录和标记，以从现有数据聚合和记录新的时间序列或生成警报。Grafana或其他 API 使用者可用于可视化收集的数据


## 应用场景
Prometheus 可以很好地记录任何纯数字时间序列。它既适合以机器为中心的监控，也适合监控高度动态的面向服务的架构。在微服务的世界中，它对多维数据收集和查询的支持是一个特殊的优势。

Prometheus 专为可靠性而设计，是您在中断期间可以使用的系统，可让您快速诊断问题。每个 Prometheus 服务器都是独立的，不依赖于网络存储或其他远程服务。当您的基础设施的其他部分损坏时，您可以依赖它，并且您无需设置大量基础设施即可使用它。

## 什么时候不合适？
Prometheus 重视可靠性。即使在故障情况下，您也可以随时查看有关系统的可用统计信息。如果您需要 100% 的准确性，例如按请求计费，Prometheus 不是一个好的选择，因为收集的数据可能不够详细和完整。在这种情况下，您最好使用其他系统来收集和分析数据以进行计费，并使用 Prometheus 进行其余的监控。