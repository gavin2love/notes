---
title: hetzner分区扩容
date: 2022-03-21 16:36:00
permalink: /pages/6313a4/
---

# HZ硬件信息

	Hardware data:
	CPU1: AMD Ryzen 5 3600 6-Core Processor (Cores 12)
	Memory:  64237 MB
	Disk /dev/nvme0n1: 512 GB (=> 476 GiB) doesn't contain a valid partition tabl
	Disk /dev/nvme1n1: 512 GB (=> 476 GiB) doesn't contain a valid partition tabl 
	Total capacity 953 GiB with 2 Disks
   
# 自动化安装配置文件
	vim install-config.txt
	DRIVE1 /dev/nvme0n1
	DRIVE2 /dev/nvme1n1
	SWRAID 0
	SWRAIDLEVEL 0
	BOOTLOADER grub
	HOSTNAME PVE-Master
	PART /boot ext3 512M
	PART lvm vg0 all
	LV vg0 swap swap swap 16G
	LV vg0 root / ext4 all
	IMAGE /root/.oldroot/nfs/install/../images/Debian-109-buster-64-minimal.tar.gz
	
	# 开始安装
	installimage -a -c install-config.txt

# 进入系统查看分区

    root@Debian-108-buster-64-minimal ~ # lsblk
    NAME         MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
    nvme0n1      259:0    0   477G  0 disk
    ├─nvme0n1p1  259:1    0   512M  0 part /boot
    └─nvme0n1p2  259:2    0 476.4G  0 part
      ├─vg0-root 253:0    0 455.4G  0 lvm  /
      ├─vg0-swap 253:1    0    16G  0 lvm  [SWAP]
      └─vg0-tmp  253:2    0     5G  0 lvm  /tmp
    nvme1n1      259:3    0   477G  0 disk

#  首先，向LVM添加物理卷（每个驱动器一个）：

    pvcreate /dev/nvme1n1

# 然后，将使用新添加的物理卷扩展卷组：

    vgextend vg0 /dev/nvme1n1

# 现在，我们将剩余的所有可用空间添加到逻辑卷：

    lvextend -l +100%FREE /dev/vg0/root

#最后，我们扩展文件系统：

    resize2fs /dev/mapper/vg0-root

# 可以挂载其他：

    mkdir /storage
    mount /dev/mapper/vg0-home /storage

> 请注意，resize2fs只适用于ext4。如果你想使用XFS，必须使用xfs_growfs

# Debian10源
    cat /etc/apt/sources.list 
    #Packages and Security Updates from the Hetzner Debian Mirror
    deb http://mirror.hetzner.de/debian/packages buster         main contrib non-free
    deb http://mirror.hetzner.de/debian/packages buster-updates main contrib non-free
    deb http://mirror.hetzner.de/debian/security buster/updates main contrib non-free
    deb http://deb.debian.org/debian/ buster          main contrib non-free
    deb http://deb.debian.org/debian/ buster-updates  main contrib non-free
    deb http://security.debian.org/   buster/updates  main contrib non-free
